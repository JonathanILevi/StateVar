env:
 - CABALVER=1.16 GHCVER=7.0.4
 - CABALVER=1.16 GHCVER=7.2.2
 - CABALVER=1.16 GHCVER=7.4.2
 - CABALVER=1.16 GHCVER=7.6.3
 - CABALVER=1.20 GHCVER=7.8.4
 - CABALVER=1.22 GHCVER=7.10.1
 - CABALVER=head GHCVER=head

matrix:
  allow_failures:
   - env: CABALVER=head GHCVER=head

sudo: false

# It seems that we can't use CABALVER and GHCVER here, so we have to install
# all versions. This looks like a bug on Travis CI. Furthermore, GHC 7.10.2
# is not on the whitelist yet. (TODO: Change 7.10.1 to 7.10.2 when possible.)
addons:
  apt:
    sources:
     - hvr-ghc
    packages:
     - ghc-7.0.4
     - ghc-7.2.2
     - ghc-7.4.2
     - ghc-7.6.3
     - ghc-7.8.4
     - ghc-7.10.1
     - ghc-head
     - cabal-install-1.16
     - cabal-install-1.20
     - cabal-install-1.22
     - cabal-install-head

install:
 - export PATH="/opt/cabal/$CABALVER/bin:/opt/ghc/$GHCVER/bin:$PATH"

before_script:
 - cabal --version
 - cabal update
 - ghc --version
 - ghc-pkg list

script:
 - cabal install --enable-documentation
 - cabal sdist

after_script:
 - ghc-pkg list
